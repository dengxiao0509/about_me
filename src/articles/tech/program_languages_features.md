# 从JS的三个特性谈计算机语言发展

> JavaScript 语言是一门“面向对象”、“函数式编程”的“动态”语言。本文就基于这三个特性出发，介绍了语言发展的历程，希望帮助读者对不同的计算机语言有更系统的认识。

### 语言发展
计算机程序设计语言，经历了机器语言、汇编语言、高级语言三个过程。

#### 机器语言
机器语言是指一台计算机全部的指令集合。二进制是计算机语言的基础，也是机器唯一能理解并执行的语言。其程序就是一个个二进制文件。由于不同计算机的指令系统通常不同，所以需要针对不同型号的计算机编写不同的程序，工作量非常大，且极难调试。但是这种语言运行效率最高。

#### 汇编语言
汇编语言将一个特定指令的二进制串比如加法用简洁的人能读懂的形式表示，如“ADD”。但计算机是不懂的，需要通过汇编程序将其编译成机器语言再执行。汇编语言仍与硬件强关联，移植性差，但效率仍然很高。

#### 高级语言
早期计算机发展时，人们意识到应该设计一种接近于数学语言或人类语言，同时又不依赖机器硬件的语言，编出的程序能在所有机器上通用。高级语言源代码通常需要被编译／解释之后才能运行。

第一个高级语言是 Fortran。之后，高级语言经历了从早期语言到结构化程序设计语言，从面向过程到非面向过程的发展。

##### 结构化程序语言

结构化程序语言诞生的背景是软件生产缺乏科学规范的系统规划与测试、评估标准，即系统不可靠。人们意识到，应该像处理工程一样处理软件研制全过程，且程序设计应该易于保证正确性，便于验证，70年第一个结构化程序设计语言——Pascal便出现了。

##### 非面向过程语言

80年代初期开始，在软件设计思想上，又出现了面向对象的程序设计。在此之前，所有高级语言几乎都是面向过程的，程序流水线般执行。这于人们习惯的，针对功能处理事务不相符，应当是面向具体的应用功能，也就是对象来编程。如同集成电路一样，制造一些通用的、封装的功能模块，且无须关注其实现细节，只关注接口，需要时就调用。

除了**面向对象**，**函数式**编程也是一种非面向过程的编程思想。我们将在下文中介绍函数式编程。


发展的下一个阶段是，你只需要告诉程序你要干什么，程序就能自动生成算法、自动处理，这就是非面向过程编程。

##### 脚本语言

传统的高级语言源代码，需要经历“编写-编译-链接-运行（edit-compile-link-run）”过程才能被执行，而脚本语言，或称动态语言，是为了缩短传统过程而创建的计算机编程语言。

通常来讲，**脚本语言**是**解释**运行而非编译，由解释器根据定义好的规则“解释”代码语句，并做出相应的反应。它不象c\c++等可以编译成二进制代码,以可执行文件的形式存在，脚本语言不需要编译，可以直接用，由解释器来负责解释。与传统编译语言的区别主要在于，脚本语言是运行时才解释的。


## 几种语言特性

### 编译型、解释型语言

**编译型**语言是指，一段程序源代码需要先编译成机器可执行的机器指令（二进制）后，再由机器运行。例如C、C++。关键在于一次性翻译，并且会生成目标代码（机器可执行代码）。

**解释型**语言是指，程序源代码不是直接翻译成机器指令，而是先翻译成中间代码，再由解释器对中间代码进行运行时的解释，之后用一个执行环境读入并执行解释后的代码。例如JavaScript、PHP。其关键在于每句每句地解释并执行，如果有循环体，比如10次，那么语句就要被解释执行10次，整个过程不会产生目标代码。

编译型代码是一次性将代码编译成机器可执行的二进制文件，以后再运行就不需要翻译了，效率比较高。但是针对不同的“机器”，可以执行的指令类型不尽一致，所以跨平台能力较弱。

解释型代码每次运行时都需要重新“解释”成机器可执行的代码，效率会低些，但是其跨平台能力更强（当然需要安装解释器）。


**扩展**
当然在一些语言中，这两种特性会同时存在，例如 JVM（java 虚拟机）的 JIT（Just in time）机制。

JVM 有两种执行方式：解释执行和编译执行。

解释执行是将字节码(.class文件)在运行时解释，生成机器码运行。编译执行则是不加筛选的将全部代码进行编译机器码，不论其执行频率是否有编译价值。通常，JVM 会采取混合模式，即 JIT，它会将热点代码（如循环体内代码）翻译成机器码缓存，其他代码则采用运行时解释的方式，来提高程序执行效率。

**JavaScript**解析引擎就是能够“读懂”JS代码，并准确给出运行结果的一段程序。比如浏览器的console就是一个解释引擎。但是现在也比较难界定js的解析引擎究竟是解析器还是编译器，比如 Google 的 V8 引擎为了提高JS运行的性能，会在执行前先将源码编译成机器码，再由机器执行。这里的分类就比较不明确了，V8 引擎在运行时解释，这一点符合解释器的特性，将所有代码翻译成机器语言，这又符合编译器的特性。

### 动态、静态类型语言

**静态类型语言**是指数据类型的检查是在运行前（如编译阶段）进行的。例如C++。

**动态类型语言**是指数据类型的检查是在运行时做的。用动态类型语言编程时，不用给变量指定数据类型，该语言会在你第一次赋值给变量时，在内部记录数据类型。例如JS。

### 动态语言、静态语言

通常来讲，动态语言就是指脚本语言，比如 JavaScript。那么，它的动态性体现在哪里呢？总结来说，就是在运行时可以改变其结构。

动态是指在语言陈述时无法确定，必须在计算机执行时才能确定程序结果的特性。JS 可以随意改变对象的属性（增加、删除属性），可以通过eval函数改变当前作用域下变量的值，可以通过bind、apply改变上下文即this的值，这些在静态语言例如C++中都是没有的，C++的类结构一旦定义好了就不能随意改变，通常this的指向也是固定的。


### 函数式编程

面向对象编程，是将数据进行封装；函数式编程，可以看做是对过程的封装。其中一个重要的运用，是纯函数，即输入一定时，输出也一定的无副作用的函数。将函数看作和普通类型一样，可以对它赋值、存储、作为参数传递甚至作为返回值返回，这种思想是函数式编程中最重要的宗旨之一。

函数式编程的特点：

1. 函数定义：函数要有输入、输出；
2. 无副作用：使用纯函数，同时纯函数中不应有“变量”的概念，同样不存在“赋值”一说，只能使用“常量”；
3. 高阶函数：即函数为一等公民，与普通变量一致；
4. 柯里化：函数式编程中，可以将包含了多个参数的函数转换为一个参数的函数，通过多次调用来实现目的。示例如下：

		function add = (x,y) => x + y;
		const sum = add(1,2) // 3
		
		// 可以转换成
		function add = x => {
			return y => x + y;
		}
		const sum = add(1)(2) // 3
		
	这里的加法过程比较简单，看上去这么转换意义不大。但是对于一个比较复杂的过程来说，将其计算过程简单化，再通过多次调用简单化的函数来实现，对于开发者来说会更友好。再比如 JS 中 Array 的map方法，开发者只需传入一个函数（对于处理过程的封装），所有数组中元素都会依次调用这个函数，并返回处理后的新数组。如果map方法的实现不使用函数式编程的思想，那么每种对于数组数据的处理方式，都需要写成一个函数（参数是数组），就不友好了。
	
	map方法只是封装了对数组的循环操作，对于每个元素如何操作，由开发者自行决定（传入函数），这就是函数式编程的思想。
	


看完这些，如果你是一个前端开发，对于“JavaScript 是一门面向对象的、函数式编程的、动态语言”这样的定义，应该有更深刻的了解了吧 ；）
